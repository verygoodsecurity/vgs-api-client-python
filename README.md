# vgs api client
Storing, retrieving, and managing sensitive data within a VGS organization.

**NOTE:** _The Vault API is intended only for environments that are already PCI-compliant.
If you want to use this API, but are not yet PCI-compliant, you can
use [VGS Collect](https://www.verygoodsecurity.com/docs/vgs-collect/what-is-it) or
VGS Proxy with [Inbound Routes](https://www.verygoodsecurity.com/docs/getting-started/quick-integration#securing-inbound-connection)
to quickly and seamlessly achieve compliance._

Looking for the old version of the API? Find it
[here](https://www.verygoodsecurity.com/docs/api/1/vault).

# Introduction

Each encrypted value stored in a VGS vault has one or multiple _aliases_
associated with it. These aliases are fully opaque and retain no information
about the underlying data. The user may safely store aliases without
compromising data security.

**NOTE:** The API works with persistent storage only. Unlike volatile
storage, this means that the data is stored permanently, without any
implicit TTL.

Aliases are not valuable on their own. However, they can be used to decrypt
the associated value and pass it to another service via the
[forward proxy](https://www.verygoodsecurity.com/docs/guides/outbound-connection).

## Alias Formats

Each alias corresponds to a certain format. There are several alias formats
suitable for different kinds of sensitive data.

For example, `UUID` produces a random Base58-encoded UUID string with an
environment-dependent prefix:

```
tok_sandbox_bhtsCwFUzoJMw9rWUfEV5e
```

This format is generic and suitable for any kind of data.

The tables below contain descriptions of all alias formats recognized by the
API.

### Generic Formats

| Value                   | Description                                           |
|-------------------------|-------------------------------------------------------|
| `NUM_LENGTH_PRESERVING` | Length-Preserving, Numeric                            |
| `RAW_UUID`              | UUID                                                  |
| `UUID`                  | UUID (Prefixed, Base58-Encoded)                       |
| `GENERIC_T_FOUR`        | UUID (Prefixed, Base58-Encoded, Last four preserving) |

### Account Number Formats

| Value                             | Description                          |
|-----------------------------------|--------------------------------------|
| `FPE_ACC_NUM_T_FOUR`              | Length-Preserving, Numeric (A4)      |
| `FPE_ALPHANUMERIC_ACC_NUM_T_FOUR` | Length-Preserving, Alphanumeric (A4) |


### Payment Card Formats

| Value            | Description                                 |
|------------------|---------------------------------------------|
| `FPE_SIX_T_FOUR` | Format-Preserving, Luhn Valid (6T4)         |
| `FPE_T_FOUR`     | Format-Preserving, Luhn Valid (T4)          |
| `PFPT`           | Prefixed, Luhn Valid, 19-Digit Fixed Length |

### SSN Formats

| Value            | Description            |
|------------------|------------------------|
| `FPE_SSN_T_FOUR` | Format-Preserving (A4) |

# Authentication

This API uses `Basic` authentication.

Credentials to access the API can be generated on the
[dashboard](https://dashboard.verygoodsecurity.com) by going to the Settings
section of the vault of your choosing.

[Docs » Guides » Access credentials](https://www.verygoodsecurity.com/docs/settings/access-credentials)

# Rate Limiting

The API allows up to 3,000 requests per minute. Requests are associated with
the vault, regardless of the access credentials used to authenticate the
request.

Your current rate limit is included as HTTP headers in every API response:

| Header Name             | Description                                              |
|-------------------------|----------------------------------------------------------|
| `x-ratelimit-remaining` | The number of requests remaining in the 1-minute window. |

If you exceed the rate limit, the API will reject the request with HTTP
[429 Too Many Requests](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429).

# Errors

The API uses standard HTTP status codes to indicate whether the request
succeeded or not.

In case of failure, the response body will be JSON in a predefined format.
For example, trying to create too many aliases at once results in the
following response:

```json
{
    \"errors\": [
        {
            \"status\": 400,
            \"title\": \"Bad request\",
            \"detail\": \"Too many values (limit: 20)\",
            \"href\": \"https://api.sandbox.verygoodvault.com/aliases\"
        }
    ]
}
```


This Python package is automatically generated by the [OpenAPI Generator](https://openapi-generator.tech) project:

- API version: 1.0.0
- Package version: XXX.YYY.ZZZ
- Build package: org.openapitools.codegen.languages.PythonClientCodegen

## Requirements.

Python >=3.6

## Installation & Usage
### pip install

If the python package is hosted on a repository, you can install directly using:

```sh
pip install git+https://github.com/verygoodsecurity/vgs-api-client-python.git
```
(you may need to run `pip` with root permission: `sudo pip install git+https://github.com/verygoodsecurity/vgs-api-client-python.git`)

Then import the package:
```python
import vgs_api_client
```

### Setuptools

Install via [Setuptools](http://pypi.python.org/pypi/setuptools).

```sh
python setup.py install --user
```
(or `sudo python setup.py install` to install the package for all users)

Then import the package:
```python
import vgs_api_client
```

## Getting Started

Please follow the [installation procedure](#installation--usage) and then run the following:

```python

import time
import vgs_api_client
from pprint import pprint
from vgs_api_client.api import aliases_api
from vgs_api_client.model.create_aliases_request import CreateAliasesRequest
from vgs_api_client.model.inline_response200 import InlineResponse200
from vgs_api_client.model.inline_response2001 import InlineResponse2001
from vgs_api_client.model.inline_response201 import InlineResponse201
from vgs_api_client.model.inline_response_default import InlineResponseDefault
from vgs_api_client.model.update_alias_request import UpdateAliasRequest
# Defining the host is optional and defaults to https://api.sandbox.verygoodvault.com
# See configuration.py for a list of all supported configuration parameters.
configuration = vgs_api_client.Configuration(
    host = "https://api.sandbox.verygoodvault.com"
)

# The client must configure the authentication and authorization parameters
# in accordance with the API server security policy.
# Examples for each auth method are provided below, use the example that
# satisfies your auth use case.

# Configure HTTP basic authorization: basicAuth
configuration = vgs_api_client.Configuration(
    username = 'YOUR_USERNAME',
    password = 'YOUR_PASSWORD'
)


# Enter a context with an instance of the API client
with vgs_api_client.ApiClient(configuration) as api_client:
    # Create an instance of the API class
    api_instance = aliases_api.AliasesApi(api_client)
    create_aliases_request = CreateAliasesRequest(
        data=[
            None,
        ],
    ) # CreateAliasesRequest |  (optional)

    try:
        # Create aliases
        api_response = api_instance.create_aliases(create_aliases_request=create_aliases_request)
        pprint(api_response)
    except vgs_api_client.ApiException as e:
        print("Exception when calling AliasesApi->create_aliases: %s\n" % e)
```

## Documentation for API Endpoints

All URIs are relative to *https://api.sandbox.verygoodvault.com*

Class | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
*AliasesApi* | [**create_aliases**](docs/AliasesApi.md#create_aliases) | **POST** /aliases | Create aliases
*AliasesApi* | [**delete_alias**](docs/AliasesApi.md#delete_alias) | **DELETE** /aliases/{alias} | Delete alias
*AliasesApi* | [**reveal_alias**](docs/AliasesApi.md#reveal_alias) | **GET** /aliases/{alias} | Reveal single alias
*AliasesApi* | [**reveal_multiple_aliases**](docs/AliasesApi.md#reveal_multiple_aliases) | **GET** /aliases | Reveal multiple aliases
*AliasesApi* | [**update_alias**](docs/AliasesApi.md#update_alias) | **PUT** /aliases/{alias} | Update data classifiers


## Documentation For Models

 - [Alias](docs/Alias.md)
 - [AliasFormat](docs/AliasFormat.md)
 - [ApiError](docs/ApiError.md)
 - [CreateAliasesRequest](docs/CreateAliasesRequest.md)
 - [CreateAliasesRequestExisting](docs/CreateAliasesRequestExisting.md)
 - [CreateAliasesRequestNew](docs/CreateAliasesRequestNew.md)
 - [InlineResponse200](docs/InlineResponse200.md)
 - [InlineResponse2001](docs/InlineResponse2001.md)
 - [InlineResponse201](docs/InlineResponse201.md)
 - [InlineResponseDefault](docs/InlineResponseDefault.md)
 - [RevealedData](docs/RevealedData.md)
 - [UpdateAliasRequest](docs/UpdateAliasRequest.md)
 - [UpdateAliasRequestData](docs/UpdateAliasRequestData.md)


## Documentation For Authorization


## basicAuth

- **Type**: HTTP basic authentication


## Author

support@verygoodsecurity.com


## Notes for Large OpenAPI documents
If the OpenAPI document is large, imports in vgs_api_client.apis and vgs_api_client.models may fail with a
RecursionError indicating the maximum recursion limit has been exceeded. In that case, there are a couple of solutions:

Solution 1:
Use specific imports for apis and models like:
- `from vgs_api_client.api.default_api import DefaultApi`
- `from vgs_api_client.model.pet import Pet`

Solution 2:
Before importing the package, adjust the maximum recursion limit as shown below:
```
import sys
sys.setrecursionlimit(1500)
import vgs_api_client
from vgs_api_client.apis import *
from vgs_api_client.models import *
```

